
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El Escondite Inglés Regular</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: white;
            font-family: Arial, sans-serif;
        }

        .container {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            margin-top: 20px;
        }

        .base {
            position: relative;
            width: 700px;
            height: 600px;
            background-color: black;
            border-radius: 12px;
            display: flex;
            overflow: visible; /* Cambiado de hidden a visible */
        }

        .cuadrados {
            width: 60px;
            display: flex;
            flex-direction: column;
            justify-content: space-evenly;
            padding: 10px 0;
        }

        .cell {
            width: 50px;
            height: 50px;
            background-color: white;
            border: 2px solid black;
            margin: 5px auto;
        }

        .Personajes {
            position: absolute;
            bottom: -80px; /* Ajustado para que se vean mejor */
            left: 100px; /* Ajustado para centrar mejor */
            width: calc(100% - 200px);
            display: flex;
            justify-content: space-around;
            z-index: 10; /* Añadido para asegurar que esté encima */
        }

        .jugador {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: rgba(255, 255, 255, 0.9); /* Fondo semitransparente */
            padding: 10px;
            border-radius: 8px;
            border: 2px solid #333;
        }

        .Personajes img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            position: relative;
            z-index: 1000;
        }

        .buttons {
            margin-top: 10px;
            display: flex;
            gap: 5px;
        }

        .buttons button {
            padding: 8px 12px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .buttons button:hover {
            background-color: #45a049;
        }

        .buttons button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        /* Estilos para los personajes en movimiento */
        .personaje-movil {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            transition: all 0.5s ease;
            z-index: 100;
        }

        /* Botón de reinicio */
        .reinicio-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            background-color: #f44336;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            z-index: 1000;
        }

        .reinicio-btn:hover {
            background-color: #da190b;
        }

        /* Indicador de turno */
        .turno-info {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="turno-info" id="turno-info">
        Turno 1 - Elijan su acción
    </div>

    <button class="reinicio-btn" onclick="reiniciarJuego()">Reiniciar Juego</button>

    <div class="container">
        <div class="base">
            <div id="cuadrado" class="cuadrados">
                <div class="cell"></div>
                <div class="cell"></div>
                <div class="cell"></div>
                <div class="cell"></div>
                <div class="cell"></div>
                <div class="cell"></div>
                <div class="cell"></div>
                <div class="cell"></div>
                <div class="cell"></div>
                <div class="cell"></div>
            </div>
            
            <!-- Personajes -->
            <div class="Personajes">
               <div class="jugador">
    <img id="goku" src="imagenes/jugador 1.jpg" alt="Goku">
    <div class="buttons">
        <button onclick="movimientosElegidos('goku','avanzar')" id="avanzar_goku">Avanzar</button>
        <button onclick="movimientosElegidos('goku','detenerse')" id="detenerse_goku">Detenerse</button>
    </div>
</div>

<div class="jugador">
    <img id="naruto" src="imagenes/jugador 2.jpg" alt="Naruto">
    <div class="buttons">
        <button onclick="movimientosElegidos('naruto','avanzar')" id="avanzar_naruto">Avanzar</button>
        <button onclick="movimientosElegidos('naruto','detenerse')" id="detenerse_naruto">Detenerse</button>
    </div>
</div>

<div class="jugador">
    <img id="luffy" src="imagenes/jugador 3.jpg" alt="Luffy">
    <div class="buttons">
        <button onclick="movimientosElegidos('luffy','avanzar')" id="avanzar_luffy">Avanzar</button>
        <button onclick="movimientosElegidos('luffy','detenerse')" id="detenerse_luffy">Detenerse</button>
    </div>
</div>

            </div>
        </div>
    </div>

    <script>
        // Variables básicas del juego
        var posicionGoku = 0;
        var posicionNaruto = 0;
        var posicionLuffy = 0;
        
        var corazonGoku = false;
        var corazonNaruto = false;
        var corazonLuffy = false;
        
        var accionGoku = "";
        var accionNaruto = "";
        var accionLuffy = "";
        
        // Bolsa de dados (que dados quedan disponibles)
        var bolsa = ['negro1', 'negro2', 'negro3', 'rojo'];
        var dadosNegrosUsados = [];
        
        // Como son los dados (cada numero representa una cara del dado)
        var dadoNegro1 = [1, 1, 1, 1, 2, 2]; // 4 unos, 2 doses
        var dadoNegro2 = [1, 1, 1, 1, 0, 0]; // 4 unos, 2 ceros
        var dadoNegro3 = [1, 1, 0, 0, 0, 0]; // 2 unos, 4 ceros
        var dadoRojo = [1, 1, 1, 1, 1, 0];   // 5 unos, 1 cero
        
        var turnoNumero = 1;
        var cuantosJugadoresEligieron = 0;
        var juegoTerminado = false;

        // Función que se llama cuando un jugador presiona un botón
       function movimientosElegidos(jugador, accion) {
    // Si el juego ya terminó, no hacer nada
    if (juegoTerminado == true) {
        return;
    }

    // Verificar si el jugador ya eligió para evitar elegir dos veces
    if (jugador == "goku" && accionGoku != "") {
        return;
    }
    if (jugador == "naruto" && accionNaruto != "") {
        return;
    }
    if (jugador == "luffy" && accionLuffy != "") {
        return;
    }

    // Guardar la acción que eligió el jugador
    if (jugador == "goku") {
        accionGoku = accion;
    } else if (jugador == "naruto") {
        accionNaruto = accion;
    } else if (jugador == "luffy") {
        accionLuffy = accion;
    }

    // Contar cuantos jugadores ya eligieron
    cuantosJugadoresEligieron = cuantosJugadoresEligieron + 1;

    // Desactivar los botones del jugador que ya eligió
    document.getElementById("avanzar_" + jugador).disabled = true;
    document.getElementById("detenerse_" + jugador).disabled = true;

    console.log(jugador + " eligió: " + accion);

    // Actualizar el texto que muestra el turno
    var textoTurno = "Turno " + turnoNumero + " - Esperando " + (3 - cuantosJugadoresEligieron) + " jugadores";
    document.getElementById('turno-info').textContent = textoTurno;

    // Si los 3 jugadores ya eligieron, procesar el turno
    if (cuantosJugadoresEligieron == 3) {
        document.getElementById('turno-info').textContent = "Turno " + turnoNumero + " - Procesando...";
        setTimeout(procesarTurno, 1000);
    }
}



        // Función para tirar un dado
        function tirarDado(cualDado) {
            var numeroRandom = Math.random(); // Genera número entre 0 y 1
            var posicion = Math.floor(numeroRandom * 6); // Convierte a número entre 0 y 5
            
            if (cualDado == "negro1") {
                return dadoNegro1[posicion];
            } else if (cualDado == "negro2") {
                return dadoNegro2[posicion];
            } else if (cualDado == "negro3") {
                return dadoNegro3[posicion];
            } else if (cualDado == "rojo") {
                return dadoRojo[posicion];
            }
        }

        // Función para sacar un dado de la bolsa
        function sacarDadoDeBolsa() {
            // Si no quedan dados en la bolsa, volver a llenarla
            if (bolsa.length == 0) {
                bolsa = ['negro1', 'negro2', 'negro3', 'rojo'];
                dadosNegrosUsados = [];
                console.log("Bolsa rellenada con todos los dados");
            }
            
            // Elegir un dado al azar de la bolsa
            var numeroRandom = Math.random();
            var posicion = Math.floor(numeroRandom * bolsa.length);
            var dadoElegido = bolsa[posicion];
            
            // Quitar el dado de la bolsa
            bolsa.splice(posicion, 1);
            
            return dadoElegido;
        }

        // Función para mover un jugador en la pantalla
        function moverJugador(jugador, nuevaPosicion) {
    var imagen = document.getElementById(jugador);

    // La posición no puede ser menor que 0 ni mayor que 10
    if (nuevaPosicion < 0) {
        nuevaPosicion = 0;
    }
    if (nuevaPosicion > 10) {
        nuevaPosicion = 10;
    }

    // Quitar la clase de movimiento
    imagen.classList.remove('personaje-movil');

    if (nuevaPosicion == 0) {
        // Posición inicial - dejar en su lugar original
        imagen.style.position = 'relative';
        imagen.style.left = '15px';
        imagen.style.bottom = '20px';
        imagen.style.transform = 'none';
    } else {
        // Posiciones en el tablero
        imagen.classList.add('personaje-movil');
        imagen.style.position = 'absolute';
        imagen.style.left = '15px';
        imagen.style.bottom = ((10 - nuevaPosicion) * 55) + 'px';
    }
}


    // Quitar la clase de movimiento
    imagen.classList.remove('personaje-movil');

    if (nuevaPosicion == 0) {
        // Posición inicial - dejar en su lugar original
        imagen.style.position = 'relative';
        imagen.style.left = 'auto';
        imagen.style.bottom = 'auto';
        imagen.style.transform = 'none';
    } else {
        // Posiciones en el tablero
        imagen.classList.add('personaje-movil');
        imagen.style.position = 'absolute';
        imagen.style.left = '15px';

        // Calcular la posición vertical
        var posicionVertical = (10 - nuevaPosicion) * 55 + 20;
        imagen.style.bottom = posicionVertical + 'px';
    }



        // Función para mostrar si un jugador tiene corazón
        function actualizarCorazon(jugador, tieneCorazon) {
            var imagen = document.getElementById(jugador);
            if (tieneCorazon == true) {
                imagen.style.border = '3px solid red';
                imagen.style.boxShadow = '0 0 10px red';
            } else {
                imagen.style.border = 'none';
                imagen.style.boxShadow = 'none';
            }
        }

        // Función principal que procesa lo que pasa en cada turno
        function procesarTurno() {
    console.log('--- PROCESANDO TURNO ---');

    // Sacar un dado de la bolsa
    var dadoQueSeaio = sacarDadoDeBolsa();
    console.log("Dado que salió: " + dadoQueSeaio);

    // Si es un dado negro, guardarlo para usarlo después
    if (dadoQueSeaio == "negro1" || dadoQueSeaio == "negro2" || dadoQueSeaio == "negro3") {
        dadosNegrosUsados.push(dadoQueSeaio);
    }

    // Procesar lo que le pasa a Goku
    if (accionGoku == "detenerse") {
        // Si está parado, no pasa nada
    } else if (accionGoku == "avanzar") {
        if (dadoQueSeaio == "negro1" || dadoQueSeaio == "negro2" || dadoQueSeaio == "negro3") {
            // Avanzar una celda
            posicionGoku++;
            moverJugador("goku", posicionGoku);
            console.log("Goku avanza 1 posición");
        } else if (dadoQueSeaio == "rojo") {
            if (corazonGoku == true) {
                // Pierde el corazón pero no pasa nada más
                corazonGoku = false;
                actualizarCorazon("goku", false);
                console.log("Goku pierde su corazón");
            } else {
                // Retroceder una celda
                posicionGoku--;
                if (posicionGoku < 0) {
                    posicionGoku = 0; // No puede bajar de 0
                }
                moverJugador("goku", posicionGoku);
                console.log("Goku retrocede 1 posición");
            }
        }
    }

    // Procesar lo que le pasa a Naruto y Luffy (igual que Goku)
    // ...

    // Verificar si alguien ganó
    // ...

    // Preparar el siguiente turno
    prepararSiguienteTurno();
}

            
            // Procesar lo que le pasa a Naruto (igual que Goku)
            if (accionNaruto == "detenerse") {
                if (dadoQueSeaio == "rojo") {
                    if (corazonNaruto == false) {
                        corazonNaruto = true;
                        actualizarCorazon("naruto", true);
                        console.log("Naruto gana un corazón");
                    }
                }
            } else if (accionNaruto == "avanzar") {
                if (dadoQueSeaio == "negro1" || dadoQueSeaio == "negro2" || dadoQueSeaio == "negro3") {
                    var suma = 0;
                    for (var i = 0; i < dadosNegrosUsados.length; i++) {
                        var resultado = tirarDado(dadosNegrosUsados[i]);
                        suma = suma + resultado;
                        console.log(dadosNegrosUsados[i] + ": " + resultado);
                    }
                    posicionNaruto = posicionNaruto + suma;
                    console.log("Naruto avanza " + suma + " posiciones");
                    moverJugador("naruto", posicionNaruto);
                    
                } else if (dadoQueSeaio == "rojo") {
                    if (corazonNaruto == true) {
                        corazonNaruto = false;
                        actualizarCorazon("naruto", false);
                        console.log("Naruto pierde su corazón");
                    } else {
                        var suma = 0;
                        for (var i = 0; i < dadosNegrosUsados.length; i++) {
                            var resultado = tirarDado(dadosNegrosUsados[i]);
                            suma = suma + resultado;
                            console.log(dadosNegrosUsados[i] + ": " + resultado);
                        }
                        var resultadoRojo = tirarDado("rojo");
                        suma = suma + resultadoRojo;
                        console.log("rojo: " + resultadoRojo);
                        
                        posicionNaruto = posicionNaruto - suma;
                        if (posicionNaruto < 0) {
                            posicionNaruto = 0;
                        }
                        console.log("Naruto retrocede " + suma + " posiciones");
                        moverJugador("naruto", posicionNaruto);
                    }
                }
            }
            
            // Procesar lo que le pasa a Luffy (igual que los otros)
            if (accionLuffy == "detenerse") {
                if (dadoQueSeaio == "rojo") {
                    if (corazonLuffy == false) {
                        corazonLuffy = true;
                        actualizarCorazon("luffy", true);
                        console.log("Luffy gana un corazón");
                    }
                }
            } else if (accionLuffy == "avanzar") {
                if (dadoQueSeaio == "negro1" || dadoQueSeaio == "negro2" || dadoQueSeaio == "negro3") {
                    var suma = 0;
                    for (var i = 0; i < dadosNegrosUsados.length; i++) {
                        var resultado = tirarDado(dadosNegrosUsados[i]);
                        suma = suma + resultado;
                        console.log(dadosNegrosUsados[i] + ": " + resultado);
                    }
                    posicionLuffy = posicionLuffy + suma;
                    console.log("Luffy avanza " + suma + " posiciones");
                    moverJugador("luffy", posicionLuffy);
                    
                } else if (dadoQueSeaio == "rojo") {
                    if (corazonLuffy == true) {
                        corazonLuffy = false;
                        actualizarCorazon("luffy", false);
                        console.log("Luffy pierde su corazón");
                    } else {
                        var suma = 0;
                        for (var i = 0; i < dadosNegrosUsados.length; i++) {
                            var resultado = tirarDado(dadosNegrosUsados[i]);
                            suma = suma + resultado;
                            console.log(dadosNegrosUsados[i] + ": " + resultado);
                        }
                        var resultadoRojo = tirarDado("rojo");
                        suma = suma + resultadoRojo;
                        console.log("rojo: " + resultadoRojo);
                        
                        posicionLuffy = posicionLuffy - suma;
                        if (posicionLuffy < 0) {
                            posicionLuffy = 0;
                        }
                        console.log("Luffy retrocede " + suma + " posiciones");
                        moverJugador("luffy", posicionLuffy);
                    }
                }
            }
            
            // Verificar si alguien ganó
            var ganadores = [];
            if (posicionGoku >= 10) {
                ganadores.push("Goku");
            }
            if (posicionNaruto >= 10) {
                ganadores.push("Naruto");
            }
            if (posicionLuffy >= 10) {
                ganadores.push("Luffy");
            }
            
            if (ganadores.length > 0) {
                console.log('¡JUEGO TERMINADO!');
                console.log('Ganadores:', ganadores);
                juegoTerminado = true;
                
                var mensajeGanador = "¡" + ganadores.join(', ') + " ha ganado!";
                if (ganadores.length > 1) {
                    mensajeGanador = "¡" + ganadores.join(', ') + " han ganado!";
                }
                
                document.getElementById('turno-info').textContent = mensajeGanador;
                
                setTimeout(function() {
                    alert(mensajeGanador);
                }, 1000);
                
                return;
            }
            
            // Si ya salieron los 3 dados negros o salió el rojo, rellenar la bolsa
            if (dadosNegrosUsados.length == 3 || dadoQueSeaio == "rojo") {
                bolsa = ['negro1', 'negro2', 'negro3', 'rojo'];
                dadosNegrosUsados = [];
                console.log('Bolsa rellenada');
            }
            
            // Preparar el siguiente turno
            prepararSiguienteTurno();
        

        // Función para preparar el siguiente turno
        function prepararSiguienteTurno() {
            // Resetear acciones y habilitar botones
            Object.keys(jugadores).forEach(nombre => {
                jugadores[nombre].accion = null;
                document.getElementById(`avanzar_${nombre}`).disabled = false;
                document.getElementById(`detenerse_${nombre}`).disabled = false;
            });
            
            accionesRecibidas = 0;
            turnoActual++;
            
            document.getElementById('turno-info').textContent = 
                `Turno ${turnoActual + 1} - Elijan su acción`;
            
            console.log(`\n--- TURNO ${turnoActual + 1} ---`);
            console.log('Estado actual:');
            Object.keys(jugadores).forEach(nombre => {
                console.log(`${nombre}: posición ${jugadores[nombre].posicion}, corazón: ${jugadores[nombre].corazon}`);
            });
        }

        // Función para inicializar el juego
        function inicializarJuego() {
    console.log('¡Comenzando El Escondite Inglés Regular!');
    console.log('--- TURNO 1 ---');

    // Posicionar jugadores en la posición inicial
    moverJugador("goku", 0);
    moverJugador("naruto", 0);
    moverJugador("luffy", 0);
}


        // Función para reiniciar el juego
        function reiniciarJuego() {
            // Resetear todas las variables
            jugadores = {
                goku: { posicion: 0, corazon: false, accion: null },
                naruto: { posicion: 0, corazon: false, accion: null },
                luffy: { posicion: 0, corazon: false, accion: null }
            };
            
            bolsa = ['negro1', 'negro2', 'negro3', 'rojo'];
            dadosNegrosAcumulados = [];
            turnoActual = 0;
            accionesRecibidas = 0;
            juegoTerminado = false;
            
            document.getElementById('turno-info').textContent = 'Turno 1 - Elijan su acción';
            
            inicializarJuego();
        }

        // Inicializar el juego cuando se carga la página
        window.addEventListener('load', inicializarJuego);


        function prepararSiguienteTurno() {
            // Limpiar las acciones que eligieron los jugadores
            accionGoku = "";
            accionNaruto = "";
            accionLuffy = "";
            
            // Activar todos los botones otra vez
            document.getElementById("avanzar_goku").disabled = false;
            document.getElementById("detenerse_goku").disabled = false;
            document.getElementById("avanzar_naruto").disabled = false;
            document.getElementById("detenerse_naruto").disabled = false;
            document.getElementById("avanzar_luffy").disabled = false;
            document.getElementById("detenerse_luffy").disabled = false;
            
            // Resetear el contador
            cuantosJugadoresEligieron = 0;
            turnoNumero = turnoNumero + 1;
            
            // Actualizar el texto del turno
            document.getElementById('turno-info').textContent = "Turno " + turnoNumero + " - Elijan su acción";
            
            console.log("--- TURNO " + turnoNumero + " ---");
            console.log("Estado actual:");
            console.log("Goku: posición " + posicionGoku + ", corazón: " + corazonGoku);
            console.log("Naruto: posición " + posicionNaruto + ", corazón: " + corazonNaruto);
            console.log("Luffy: posición " + posicionLuffy + ", corazón: " + corazonLuffy);
        }

        // Función para empezar el juego
        function inicializarJuego() {
            console.log('¡Comenzando El Escondite Inglés Regular!');
            console.log('--- TURNO 1 ---');
            
            // Poner a todos los jugadores en la posición inicial
            moverJugador("goku", 0);
            moverJugador("naruto", 0);
        }
    </script>
</body>
</html>